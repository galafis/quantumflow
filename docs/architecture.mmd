graph TB
    subgraph "External Data Sources"
        BINANCE[Binance WebSocket]
        COINBASE[Coinbase API]
        KRAKEN[Kraken API]
    end

    subgraph "Connectors Layer"
        BC[Binance Connector]
        CC[Coinbase Connector]
        KC[Kraken Connector]
    end

    subgraph "Core Engine"
        OB[Order Book Manager]
        ME[Matching Engine]
        TS[Trade Stream]
    end

    subgraph "Risk Management"
        RM[Risk Manager]
        POS[Position Tracker]
        CB[Circuit Breaker]
    end

    subgraph "Analytics & Backtesting"
        BT[Backtest Engine]
        PERF[Performance Metrics]
        REPORT[Report Generator]
    end

    subgraph "API & CLI"
        CLI[Command Line Interface]
        REST[REST API]
        WS[WebSocket Server]
    end

    BINANCE -->|Market Data| BC
    COINBASE -->|Market Data| CC
    KRAKEN -->|Market Data| KC

    BC --> OB
    CC --> OB
    KC --> OB

    OB --> ME
    ME --> TS
    
    CLI --> ME
    REST --> ME
    WS --> ME

    ME --> RM
    RM --> POS
    RM --> CB

    TS --> BT
    BT --> PERF
    PERF --> REPORT

    style ME fill:#ff6b6b
    style RM fill:#4ecdc4
    style OB fill:#ffe66d
    style BT fill:#95e1d3
